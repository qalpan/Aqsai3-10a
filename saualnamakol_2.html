<!DOCTYPE html>
<html lang="kz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" href="s≈Øuretter/taÍûëba-aqsai3-10a.svg" type="image/svg">
    <title>–î–∞—É—ã—Å –±–µ—Ä—ñ—É –ø–∞—Ä–∞“ì—ã</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        /* –ñ–∞–ª–ø—ã —Å—Ç–∏–ª—å–¥–µ—Ä */
        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0;
            display: flex;
            justify-content: center;
        }
        .container { 
            background: white; 
            width: 100%;
            max-width: 900px; 
            padding: 8px; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 { font-size: 18px; color: #2c3e50; font-weight: normal; text-align: center; line-height: 1.1; margin: 0; }
        h2 { font-size: 14px; color: #34495e; font-weight: normal; margin: 4px; }
h3 {
  font-size: 13px;
  font-weight: normal;
  color: #2c3e50;
  text-align: center;
  padding: 0;
  margin: 0;
}
#full-name {
  width: calc(100% - 20px);
  padding: 8px 8px;
  margin-bottom: 8px;
  border: 1px solid #bdc3c7;
  border-radius: 8px;
  box-sizing: border-box;
  font-size: 12px;
  font-family: inter, sans serif;
}

        .vote-section {
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 8px;
            background-color: #f5f5f1;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
                   }

        .option-block {
            background: #ffffff;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            padding-bottom: 5px;
        }
        
        .option-text {
            font-size: 12px;
            color: #5e6062;
            font-weight: normal;
            text-align: center;
        }

        /* --- CANVAS –°–¢–ò–õ–Ü --- */
        canvas {
            border: 1px dashed #a4b0be;
            background-color: #fff;
            cursor: crosshair;
            width: 80%;       
            height: 80px;     
            display: block;
            touch-action: none; 
            border-radius: 4px;
        }
        
        .btn-clear {
  width: 40%;
  padding: 6px;
  background: #eee;
  color: #848180;
  border: none;
  cursor: pointer;
  margin-top: 4px;
  border-radius: 4px;
  font-size: 11px;
  transition: background 0.3s;
}
        .btn-clear:hover { background: #e7c50d; }

        .submit-btn {
            width: 100%;
            padding: 12px;
            background: #878678;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }
        .submit-btn:hover { background: #e7c50d; }
        .submit-btn:disabled { background: #bdc3c7; cursor: not-allowed; }
        
        #status {
            text-align: center;
            margin-top: 15px;
            font-weight: 600;
            min-height: 20px;
        }

        @media (max-width: 650px) {
            .options-grid { grid-template-columns: 1fr; }
                    }
        .candidate-block{margin-top:8px;}
    </style>
</head>
<body>

<div class="container">
    <h1>üìã ‚Ññ<br>–ü”ô—Ç–µ—Ä–ª–µ—Ä–¥—ñ“£, —Ç“±—Ä“ì—ã–Ω –µ–º–µ—Å “Ø–π-–∂”ô–π –º–µ–Ω—à—ñ–∫ —ñ–∏–µ–ª–µ—Ä—ñ–Ω—ñ“£ –°—ã—Ä—Ç—Ç–∞–π –¥–∞—É—ã—Å –±–µ—Ä—ñ—É –ø–∞—Ä–∞“ì—ã<br>
        –õ–∏—Å—Ç –≤ –∑–∞–æ—á–Ω–æ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∫–≤–∞—Ä—Ç–∏—Ä, –Ω–µ–∂–∏–ª—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π</h1>
    <h3>2025 –∂—ã–ª/–≥–æ–¥–∞.  –ê–ª–º–∞—Ç—ã “õ–∞–ª–∞—Å—ã/–≥–æ—Ä–æ–¥, –ê“õ—Å–∞–π-3 —à–∞“ì—ã–Ω –∞—É–¥–∞–Ω—ã/–º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω, 10a “Ø–π/–¥–æ–º.</h3>
    <input type="text" id="full-name" placeholder="–ê—Ç—ã –∂”©–Ω—ñ“£—ñ–∑–¥—ñ —Ç–æ–ª—ã“õ –∂–∞–∑—ã“£—ã–∑, –ø”ô—Ç–µ—Ä, —Ç–µ–ª–µ–ø–æ–Ω –Ω”©–º–µ—Ä—ñ–Ω, email –ø–æ—à—Ç–∞“£—ã–∑–¥—ã  - –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–µ –ø–æ–ª–Ω–æ–µ —Ñ–∏–æ, –Ω–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã" required>

    <div class="vote-section" data-question-id="q1">
        <h2>1. “Æ–∏ –∫–µ“£–µ—Å—ñ –º“Ø—à–µ–ª–µ—Ä—ñ–Ω —Å–∞–∏–ª–∞—É - –í—ã–±—Ä–∞—Ç—å —á–ª–µ–Ω–æ–≤ –°–æ–≤–µ—Ç–∞ –¥–æ–º–∞:</h2>
        
        <div class="candidate-block" style="background:#fff; border:1px solid #dcdde1; ">
            <div class="option-text" style="font-size:14px; font-weight:bold; margin-top:8px;">Aijan</div>
            <div class="options-grid">
                <div class="option-block">
                    <div class="option-text">“õ–æ–ª–¥–∞–∏–º—ã–Ω - –∑–∞</div>
                    <canvas data-label="1.1. Aijan - “õ–æ–ª–¥–∞–∏–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞—Ä—Å—ã–º—ã–Ω - –ø—Ä–æ—Ç–∏–≤</div>
                    <canvas data-label="1.2. Aijan - “õ–∞—Ä—Å—ã–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞–ª—ã—Å–ø—ã–Ω - –≤–æ–∑–¥–µ—Ä–∂—É—Å—å</div>
                    <canvas data-label="1.3. Aijan - “õ–∞–ª—ã—Å–ø—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
            </div>
        </div>

        <div class="candidate-block" style="background:#fff; border:1px solid #dcdde1; ">
            <div class="option-text" style="font-size:14px; font-weight:bold; margin-top:8px;">Jangyl</div>
            <div class="options-grid">
                <div class="option-block">
                    <div class="option-text">“õ–æ–ª–¥–∞–∏–º—ã–Ω - –∑–∞</div>
                    <canvas data-label="1.4. Jangyl - “õ–æ–ª–¥–∞–∏–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞—Ä—Å—ã–º—ã–Ω - –ø—Ä–æ—Ç–∏–≤</div>
                    <canvas data-label="1.5. Jangyl - “õ–∞—Ä—Å—ã–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞–ª—ã—Å–ø—ã–Ω - –≤–æ–∑–¥–µ—Ä–∂—É—Å—å</div>
                    <canvas data-label="1.6. Jangyl - “õ–∞–ª—ã—Å–ø—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
            </div>
        </div>

        <div class="candidate-block" style="background:#fff; border:1px solid #dcdde1; ">
            <div class="option-text" style="font-size:14px; font-weight:bold; margin-top:8px;">Gylnar</div>
            <div class="options-grid">
                <div class="option-block">
                    <div class="option-text">“õ–æ–ª–¥–∞–∏–º—ã–Ω - –∑–∞</div>
                    <canvas data-label="1.7. Gylnar - “õ–æ–ª–¥–∞–∏–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞—Ä—Å—ã–º—ã–Ω - –ø—Ä–æ—Ç–∏–≤</div>
                    <canvas data-label="1.8. Gylnar - “õ–∞—Ä—Å—ã–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞–ª—ã—Å–ø—ã–Ω - –≤–æ–∑–¥–µ—Ä–∂—É—Å—å</div>
                    <canvas data-label="1.9. Gylnar - “õ–∞–ª—ã—Å–ø—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
            </div>
        </div>

        <div class="candidate-block" style="background:#fff; border:1px solid #dcdde1;">
            <div class="option-text" style="font-size:14px; font-weight:bold; margin-top:8px;">Alia</div>
            <div class="options-grid">
                <div class="option-block">
                    <div class="option-text">“õ–æ–ª–¥–∞–∏–º—ã–Ω - –∑–∞</div>
                    <canvas data-label="1.10. Alia - “õ–æ–ª–¥–∞–∏–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞—Ä—Å—ã–º—ã–Ω - –ø—Ä–æ—Ç–∏–≤</div>
                    <canvas data-label="1.11. Alia - “õ–∞—Ä—Å—ã–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞–ª—ã—Å–ø—ã–Ω - –≤–æ–∑–¥–µ—Ä–∂—É—Å—å</div>
                    <canvas data-label="1.12. Alia - “õ–∞–ª—ã—Å–ø—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="vote-section" data-question-id="q2">
        <h2>2. –ë–∞“õ—ã–ª–∞—É—à—ã —Ä–µ–≤–∏–∑–æ—Ä —Å–∞–∏–ª–∞—É - –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ —Ä–µ–≤–∏–∑–æ—Ä–∞:</h2>
        <div class="candidate-block" style="background:#fff; border:1px solid #dcdde1;">
            <div class="option-text" style="font-size:14px; font-weight:bold; margin-top:8px;">Marat</div>
            <div class="options-grid">
                <div class="option-block">
                    <div class="option-text">“õ–æ–ª–¥–∞–∏–º—ã–Ω - –∑–∞</div>
                    <canvas data-label="2.1. Marat - “õ–æ–ª–¥–∞–∏–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞—Ä—Å—ã–º—ã–Ω - –ø—Ä–æ—Ç–∏–≤</div>
                    <canvas data-label="2.2. Marat - “õ–∞—Ä—Å—ã–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞–ª—ã—Å–ø—ã–Ω - –≤–æ–∑–¥–µ—Ä–∂—É—Å—å</div>
                    <canvas data-label="2.3. Marat - “õ–∞–ª—ã—Å–ø—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
            </div>
        </div>
    </div>

    <div class="vote-section" data-question-id="q3"> 
        <h2>3. –ú–Ü–ë —Ç”©—Ä–∞“ì–∞—Å—ã–Ω —Å–∞–∏–ª–∞—É - –í—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è –û–°–ò:</h2>
        <div class="candidate-block" style="background:#fff; border:1px solid #dcdde1; ">
            <div class="option-text" style="font-size:14px; font-weight:bold; margin-top:8px;">–°–µ—Ä—ñ–∫–∂–∞–Ω –¢”©–ª–µ—É“ì–∞–ª–∏“±–ª—ã –ö”©–∫–µ–±–∞–π</div>
            <div class="options-grid">
                <div class="option-block">
                    <div class="option-text">“õ–æ–ª–¥–∞–∏–º—ã–Ω - –∑–∞</div>
                    <canvas data-label="3.1. –°–µ—Ä—ñ–∫–∂–∞–Ω –¢”©–ª–µ—É“ì–∞–ª–∏“±–ª—ã –ö”©–∫–µ–±–∞–π - “õ–æ–ª–¥–∞–∏–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞—Ä—Å—ã–º—ã–Ω - –ø—Ä–æ—Ç–∏–≤</div>
                    <canvas data-label="3.2. –°–µ—Ä—ñ–∫–∂–∞–Ω –¢”©–ª–µ—É“ì–∞–ª–∏“±–ª—ã –ö”©–∫–µ–±–∞–π - “õ–∞—Ä—Å—ã–º—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
                <div class="option-block">
                    <div class="option-text">“õ–∞–ª—ã—Å–ø—ã–Ω - –≤–æ–∑–¥–µ—Ä–∂—É—Å—å</div>
                    <canvas data-label="3.3. –°–µ—Ä—ñ–∫–∂–∞–Ω –¢”©–ª–µ—É“ì–∞–ª–∏“±–ª—ã –ö”©–∫–µ–±–∞–π - “õ–∞–ª—ã—Å–ø—ã–Ω"></canvas> 
                    <button class="btn-clear">”®—à—ñ—Ä—ñ—É - Clear</button>
                </div>
            </div>
        </div>
    </div>

    <button class="submit-btn" id="send-btn">–ñ—ñ–±–µ—Ä—ñ—É</button>
    <p id="status"></p>
</div>

<script>
    emailjs.init("HySfhPitSDqpVM31p"); 

    const statusMsg = document.getElementById('status');
    const canvases = document.querySelectorAll('canvas');

    function setupCanvas(canvas, clearBtn) {
        const ctx = canvas.getContext('2d');
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        
        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;

        // --- –ö”®–ö –¢“Æ–°–¢–Ü “ö–ê–õ–ê–ú ---
        ctx.lineWidth = 3 * dpr; 
        ctx.lineCap = "round"; 
        ctx.lineJoin = "round"; 
        ctx.strokeStyle = "#0000FF"; // <--- –ú–Ü–ù–ï, –ö”®–ö –¢“Æ–°

        canvas.dataset.signed = "false";

        function drawPlaceholder() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.scale(dpr, dpr);
            ctx.font = '14px sans-serif'; 
            ctx.fillStyle = '#b2bec3'; 
            ctx.textAlign = 'center'; 
            ctx.textBaseline = 'middle'; 
            ctx.fillText("“ö–æ–ª “õ–æ–π—ã“£—ã–∑ / –ü–æ–¥–ø–∏—à–∏—Ç–µ", rect.width / 2, rect.height / 2);
            ctx.restore();
            canvas.dataset.signed = "false";
        }
        
        setTimeout(drawPlaceholder, 50);

        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        function getPos(e) {
            const rect = canvas.getBoundingClientRect(); 
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            return {
                x: (clientX - rect.left) * (canvas.width / rect.width),
                y: (clientY - rect.top) * (canvas.height / rect.height)
            };
        }

        const startDraw = (e) => {
            isDrawing = true;
            if (canvas.dataset.signed === "false") {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                canvas.dataset.signed = "true";
            }
            const pos = getPos(e);
            lastX = pos.x;
            lastY = pos.y;
            e.preventDefault(); 
        };

        const draw = (e) => {
            if (!isDrawing) return;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            lastX = pos.x;
            lastY = pos.y;
            e.preventDefault();
        };

        const endDraw = () => { isDrawing = false; };

        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', endDraw);
        canvas.addEventListener('mouseout', endDraw);
        
        canvas.addEventListener('touchstart', startDraw, { passive: false });
        canvas.addEventListener('touchmove', draw, { passive: false });
        canvas.addEventListener('touchend', endDraw);

        clearBtn.addEventListener('click', (e) => {
            e.preventDefault();
            drawPlaceholder();
        });

        const handleSelection = () => {
            const candidateBlock = canvas.closest('.candidate-block');
            if (!candidateBlock) return;
            
            const siblings = candidateBlock.querySelectorAll('canvas');
            siblings.forEach(sib => {
                if (sib !== canvas && sib.dataset.signed === "true") {
                    const sibCtx = sib.getContext('2d');
                    const sibRect = sib.getBoundingClientRect();
                    const sibDpr = window.devicePixelRatio || 1;
                    
                    sibCtx.clearRect(0, 0, sib.width, sib.height);
                    
                    sibCtx.save();
                    sibCtx.scale(sibDpr, sibDpr);
                    sibCtx.font = '14px sans-serif'; 
                    sibCtx.fillStyle = '#b2bec3'; 
                    sibCtx.textAlign = 'center'; 
                    sibCtx.textBaseline = 'middle'; 
                    sibCtx.fillText("“ö–æ–ª “õ–æ–π—ã“£—ã–∑ / –ü–æ–¥–ø–∏—à–∏—Ç–µ", sibRect.width / 2, sibRect.height / 2);
                    sibCtx.restore();
                    
                    sib.dataset.signed = "false";
                }
            });
        };
        canvas.addEventListener('touchstart', handleSelection);
        canvas.addEventListener('mousedown', handleSelection);
    }

    canvases.forEach(canvas => {
        const clearBtn = canvas.parentNode.querySelector('.btn-clear');
        setupCanvas(canvas, clearBtn);
    });
    
    window.addEventListener('resize', () => {
        canvases.forEach(canvas => {
             if(canvas.dataset.signed === "false") {
                 const clearBtn = canvas.parentNode.querySelector('.btn-clear');
                 setupCanvas(canvas, clearBtn);
             }
        });
    });

    // --- –ñ–Ü–ë–ï–†–£ ---
    document.getElementById('send-btn').addEventListener('click', async () => {
        const btn = document.getElementById('send-btn');
        const fullName = document.getElementById('full-name').value.trim();

        if (!fullName) {
            statusMsg.style.color = "#e74c3c";
            statusMsg.innerText = "‚ùå –ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ, –ø”ô—Ç–µ—Ä ‚Ññ, —Ç–µ–ª–µ—Ñ–æ–Ω –∂”ô–Ω–µ email-–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!";
            document.getElementById('full-name').focus();
            return;
        }

        const signedCanvases = Array.from(canvases).filter(c => c.dataset.signed === "true");

        if (signedCanvases.length === 0) {
            statusMsg.style.color = "#e74c3c";
            statusMsg.innerText = "‚ùå –ö–µ–º –¥–µ–≥–µ–Ω–¥–µ –±—ñ—Ä —Å“±—Ä–∞“õ“õ–∞ “õ–æ–ª “õ–æ—é “õ–∞–∂–µ—Ç.";
            return;
        }

        btn.disabled = true;
        statusMsg.style.color = "#3498db";
        statusMsg.innerText = "‚è≥ –ñ—ñ–±–µ—Ä—ñ–ª—É–¥–µ... (”®—Ç—ñ–Ω–µ–º—ñ–∑ –∫“Ø—Ç—ñ“£—ñ–∑)";

        try {
            const dataByQuestion = {
                '1': '“Æ–∏ –∫–µ“£–µ—Å—ñ –º“Ø—à–µ–ª–µ—Ä—ñ–Ω —Å–∞–∏–ª–∞—É:',
                '2': '–ë–∞“õ—ã–ª–∞—É—à—ã —Ä–µ–≤–∏–∑–æ—Ä —Å–∞–∏–ª–∞—É:',
                '3': '–ú–Ü–ë —Ç”©—Ä–∞“ì–∞—Å—ã–Ω —Å–∞–∏–ª–∞—É:'
            };

            let emailBody = `<h3>“ö–∞—Ç—ã—Å—É—à—ã: ${fullName}</h3><hr>`;

            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            tempCanvas.width = 200; 
            tempCanvas.height = 80;

            const votesData = [];

            for (let cvs of signedCanvases) {
                const label = cvs.getAttribute('data-label');
                const qNum = label.charAt(0);

                tempCtx.fillStyle = "#fff";
                tempCtx.fillRect(0,0, tempCanvas.width, tempCanvas.height);
                tempCtx.drawImage(cvs, 0, 0, tempCanvas.width, tempCanvas.height);

                const lowResDataURL = tempCanvas.toDataURL('image/jpeg', 0.5);
                votesData.push({ qNum, label, img: lowResDataURL });
            }

            for (const qNum in dataByQuestion) {
                const qVotes = votesData.filter(v => v.qNum === qNum);
                if (qVotes.length > 0) {
                    emailBody += `<h4>${qNum}. ${dataByQuestion[qNum]}</h4><ul>`;
                    qVotes.forEach(v => {
                        emailBody += `<li><b>${v.label}</b><br><img src="${v.img}" width="150" style="border:1px solid #ddd; border-radius:4px;"/></li>`;
                    });
                    emailBody += `</ul>`;
                }
            }

            const templateParams = {
                my_data: emailBody,
                full_name: fullName
            };

            await emailjs.send('service_0mczhxj', 'template_t4xdvyl', templateParams);
            
            statusMsg.style.color = "#27ae60";
            statusMsg.innerText = "‚úÖ –°”ô—Ç—Ç—ñ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ! –†–∞—Ö–º–µ—Ç.";
            
        } catch (err) {
            console.error(err);
            statusMsg.style.color = "#e74c3c";
            statusMsg.innerText = "‚ùå “ö–∞—Ç–µ –±–æ–ª–¥—ã. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç—ñ —Ç–µ–∫—Å–µ—Ä—ñ–ø –∫”©—Ä—ñ“£—ñ–∑.";
            btn.disabled = false;
        }
    });
</script>
</body>
</html>
