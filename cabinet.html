<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> ¬† ¬† ¬† ¬†
<link rel="shortcut icon" href="s≈Øuretter/taÍûëba-aqsai3-10a.svg" type="image/svg">
<title>–ñ–µ–∫–µ –ö–∞–±–∏–Ω–µ—Ç - Aqsai3-10a ≈Øi b√Ωrlest√Ωg√Ω</title>
<link rel='stylesheet' href='yi.css' type='text/css'/>¬†¬†

<style>
/* -------------------------- */
/* Cabinet –∞—Ä–Ω–∞–π—ã —Å—Ç–∏–ª—å–¥–µ—Ä—ñ */
/* -------------------------- */
body {
    background-color: #f4f4f4;
}
.content-wrapper {
    max-width: 900px;
    margin: 40px auto;
    padding: 30px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
.payment-history-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 0.95em;
}
.payment-history-table th, .payment-history-table td {
    border: 1px solid #ddd;
    padding: 12px 10px;
    text-align: left;
}
.payment-history-table th {
    background-color: #007bff; /* –ë–∞—Å—Ç—ã —Ç“Ø—Å */
    color: white;
    text-align: center;
}
.payment-history-table tr:nth-child(even) {
    background-color: #f9f9f9;
}
.status-paid { color: green; font-weight: bold; }
.status-pending { color: orange; font-weight: bold; }
#apartment-input {
    min-width: 100px;
    text-align: center;
}
</style>
</head>

<body>
<ul class="belgi" href="https://qalpan.github.io/Aqsai3-10a/">
<img src="s≈Øuretter/jazyu-Aqsai3-10a yi birlestigi.svg" alt="–ë–∞—Å—Ç—ã –±–µ—Ç" title="–ë–∞—Å—Ç—ã –±–µ—Ç–∫–µ - –æ—Ä–∞–ª—ã—É" data-image="s≈Øuretter/jazyu-Aqsai3-10a yi birlestigi.svg" data-description="–±–∞—Å—Ç–∞—É">
</ul>

<ul class="injener">
    <a><strong>–ò–Ω–∂–µ–Ω–µ—Ä–ª—ñ–∫ –∂–µ–ª—ñ–ª–µ—Ä–≥–µ “õ—ã–∑—ã–º–µ—Ç</strong></a>
    <a href="tel:+7 700 740 0005">+7 700 740 0005 operator</a>
    <a href="tel:+7 747 921 5140¬† tel:+7 705 765 1170">+7 747 921 5140¬† +7 705 765 1170 santex</a>
    </ul>

<div class="content-wrapper">
    <h2>üë§ –¢“±—Ä“ì—ã–Ω–Ω—ã“£ –ñ–µ–∫–µ –ö–∞–±–∏–Ω–µ—Ç—ñ</h2>
    <hr>
    
    <div style="margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background-color: #f9f9f9;">
        <label for="apartment-input" style="font-weight: bold;">–ü”ô—Ç–µ—Ä –Ω”©–º—ñ—Ä—ñ–Ω –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:</label>
        <input type="number" id="apartment-input" placeholder="–ú—ã—Å–∞–ª—ã: 10" value="" 
               style="padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 3px;">
        <button onclick="loadPaymentData()" 
                style="padding: 8px 15px; background-color: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer;">
            –î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∫”©—Ä—Å–µ—Ç—É
        </button>
        <p id="data-status" style="margin-top: 10px; font-size: 0.9em;"></p>
    </div>

    <div id="payment-table-container">
        <p>–ö–µ—Å—Ç–µ–Ω—ñ –∫”©—Ä—É “Ø—à—ñ–Ω –ø”ô—Ç–µ—Ä –Ω”©–º—ñ—Ä—ñ–Ω –µ–Ω–≥—ñ–∑—ñ–ø, –±–∞—Ç—ã—Ä–º–∞–Ω—ã –±–∞—Å—ã“£—ã–∑.</p>
    </div>

</div>

<ul class="menu">
<li class="list">
<a href="https://qalpan.github.io/Aqsai3-10a/">web - site ‚Äì Aqsai3-10a</a>
</li>
</ul>

<footer>
<p>Aqsai3-10a yi birlestigi</p>
</footer>

<script type="text/javascript">
// --- 1. –ë–∞—Å—Ç–∞–ø“õ—ã —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä (“ö–æ—Ä“ì–∞—É) ---
document.ondragstart = test;
document.onselectstart = test;
document.oncontextmenu = test;
function test(){return false}

// --- 2. –¢”©–ª–µ–º –î–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω –ñ“Ø–∫—Ç–µ—É –∂”ô–Ω–µ –ö”©—Ä—Å–µ—Ç—É ---

// –§–∞–π–ª –∂–æ–ª—ã. –ï–≥–µ—Ä cabinet.html –∂”ô–Ω–µ payments.json –±—ñ—Ä –ø–∞–ø–∫–∞–¥–∞ –±–æ–ª—Å–∞, –±“±–ª –∂“±–º—ã—Å —ñ—Å—Ç–µ—É—ñ –∫–µ—Ä–µ–∫.
// –ï–≥–µ—Ä “õ–∞—Ç–µ (404) —à—ã“õ—Å–∞, –º“±–Ω—ã '/Aqsai3-10a/payments.json' –µ—Ç—ñ–ø ”©–∑–≥–µ—Ä—Ç—ñ“£—ñ–∑.
const paymentDataUrl = 'payments.json'; 

const container = document.getElementById('payment-table-container');
const statusMessage = document.getElementById('data-status');
const apartmentInput = document.getElementById('apartment-input');

// Enter –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—É –∞—Ä“õ—ã–ª—ã –∂“Ø–∫—Ç–µ—É
apartmentInput.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
        loadPaymentData();
    }
});

function loadPaymentData() {
    const targetApartment = apartmentInput.value.trim();

    if (!targetApartment || isNaN(targetApartment) || targetApartment < 1) {
        statusMessage.innerHTML = '<span style="color: red; font-weight: bold;">–ü”ô—Ç–µ—Ä –Ω”©–º—ñ—Ä—ñ–Ω –¥“±—Ä—ã—Å –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.</span>';
        container.innerHTML = '<p>–ö–µ—Å—Ç–µ–Ω—ñ –∫”©—Ä—É “Ø—à—ñ–Ω –ø”ô—Ç–µ—Ä –Ω”©–º—ñ—Ä—ñ–Ω –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.</p>';
        return;
    }

    container.innerHTML = '<p>–î–µ—Ä–µ–∫—Ç–µ—Ä –∂“Ø–∫—Ç–µ–ª—É–¥–µ, –∫“Ø—Ç—ñ“£—ñ–∑...</p>';
    statusMessage.innerHTML = `–ü”ô—Ç–µ—Ä ${targetApartment} –±–æ–π—ã–Ω—à–∞ –¥–µ—Ä–µ–∫—Ç–µ—Ä —ñ–∑–¥–µ–ª—É–¥–µ...`;

    fetch(paymentDataUrl) 
        .then(response => {
            if (!response.status === 404) {
                // HTTP “õ–∞—Ç–µ—Å—ñ (–º—ã—Å–∞–ª—ã 404, 500)
                throw new Error(`HTTP “õ–∞—Ç–µ—Å—ñ! –°—Ç–∞—Ç—É—Å: ${response.status}. –§–∞–π–ª –∂–æ–ª—ã: ${paymentDataUrl}`);
            }
            return response.json();
        })
        .then(data => {
            // –î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ —Å“Ø–∑—É
            const filteredData = data.filter(p => p.apartment === targetApartment).reverse(); // –°–æ“£“ì—ã –∞–π–ª–∞—Ä –∂–æ“ì–∞—Ä—ã–¥–∞ –±–æ–ª—É—ã “Ø—à—ñ–Ω
            
            if (filteredData.length === 0) {
                 statusMessage.innerHTML = `<span style="color: blue; font-weight: bold;">–ü”ô—Ç–µ—Ä ${targetApartment} “Ø—à—ñ–Ω —Ç”©–ª–µ–º —Ç–∞—Ä–∏—Ö—ã —Ç–∞–±—ã–ª–º–∞–¥—ã.</span>`;
                 container.innerHTML = `<p><strong>${targetApartment}</strong> –ø”ô—Ç–µ—Ä—ñ –±–æ–π—ã–Ω—à–∞ —Ç–∞–±—ã–ª“ì–∞–Ω –∂–∞–∑–±–∞–ª–∞—Ä –∂–æ“õ.</p>`;
                 return;
            }

            statusMessage.innerHTML = `<span style="color: green; font-weight: bold;">${filteredData.length} –∂–∞–∑–±–∞ —Ç–∞–±—ã–ª–¥—ã.</span>`;

            // –ö–µ—Å—Ç–µ–Ω—ñ “õ“±—Ä—É
            let html = `
                <h3>–ü”ô—Ç–µ—Ä ${targetApartment} –±–æ–π—ã–Ω—à–∞ —Ç”©–ª–µ–º —Ç–∞—Ä–∏—Ö—ã</h3>
                <table class="payment-history-table">
                    <thead>
                        <tr>
                            <th>–ê–π</th>
                            <th>–°–æ–º–∞—Å—ã (—Ç–≥)</th>
                            <th>–ú”ô—Ä—Ç–µ–±–µ—Å—ñ</th>
                            <th>–¢“Ø–±—ñ—Ä—Ç–µ–∫</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            filteredData.forEach(payment => {
                // –ú”ô—Ä—Ç–µ–±–µ–≥–µ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã –∫–ª–∞—Å—Å –±–µ—Ä—É
                const statusClass = payment.status === '–¢”©–ª–µ–Ω–¥—ñ' ? 'status-paid' : 'status-pending';
                const statusText = payment.status;
                const amountFormatted = (payment.amount || 0).toLocaleString('kk-KZ');

                html += `
                    <tr>
                        <td>${payment.month}</td>
                        <td style="text-align: right;">${amountFormatted}</td>
                        <td class="${statusClass}">${statusText}</td>
                        <td style="text-align: center;">${payment.receipt_link ? '<a href="' + payment.receipt_link + '" target="_blank">–¢“Ø–±—ñ—Ä—Ç–µ–∫ –∫”©—Ä—É</a>' : '‚Äî'}</td>
                    </tr>
                `;
            });

            html += '</tbody></table>';
            container.innerHTML = html;
        })
        .catch(error => {
            console.error('–¢”©–ª–µ–º –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ–Ω –∂“Ø–∫—Ç–µ—É “õ–∞—Ç–µ—Å—ñ:', error);
            statusMessage.innerHTML = '<span style="color: red; font-weight: bold;">–î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∂“Ø–∫—Ç–µ—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞—Ç–µ —à—ã“õ—Ç—ã.</span>';
            container.innerHTML = `<p style="color: red;">–î–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ –∂“Ø–∫—Ç–µ—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã. –ö–æ–Ω—Å–æ–ª—å–¥—ñ —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑. “ö–∞—Ç–µ: ${error.message}</p>`;
        });
}

// --- 3. –ê–∫–∫–æ—Ä–¥–µ–æ–Ω —Ñ—É–Ω–∫—Ü–∏—è—Å—ã (–°—ñ–∑–¥—ñ“£ –±–∞—Å—Ç–∞–ø“õ—ã –∫–æ–¥—ã“£—ã–∑) ---
const list = document.querySelectorAll('.list');
// ... (—Å—ñ–∑–¥—ñ“£ –±–∞—Å“õ–∞ JS –ª–æ–≥–∏–∫–∞“£—ã–∑)
</script>

</body>
</html>
